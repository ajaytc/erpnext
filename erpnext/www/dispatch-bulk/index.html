{% import 'erpnext/templates/macros.html' as macros %}
{{ macros.breadcrumb([{'label':'Home','url':'/'},{'label':'Client','url':'/'},{'label':'Dispatch Bulk','url':'#'}]) }}

<h2  onload="ss()">{{_("Dispatch Bulk")}}</h2>
{% set ns = namespace(row_class="") %}
{% for location in presenting_order_data %}
<div>
    <div >
        <h3 class="col-3" >
            <a class="font-weight-bold" >
                {{presenting_order_data[location]["show_name"]}}
            </a>
        </h3>
    </div>
    <div class="table-wrapper table-responsive mt-2">
        <table class="table">
            <thead>
                <th colspan='1' scope='colgroup' >Order Date</th>
                <th colspan='1' scope='colgroup' >Order Detail</th>
                <th colspan='1' scope='colgroup' ></th>
                <th colspan='1' scope='colgroup' ></th>
                <th colspan='{{presenting_order_data[location]["max_col_span"]}}' scope='colgroup' >Sizing</th>
                <th colspan='1' scope='colgroup' >Status</th>
            </thead>
            <tbody>
                {% for order in presenting_order_data[location]["orders"] %}
                    <tr >
                        <td rowspan="{{order[ship_history_index]|length + 4}}" scope="rowgroup">
                            {% if order[po_creation_time_index]!=None %}{{order[po_creation_time_index].strftime('%Y-%m-%d')}}
                            {% elif order[soi_creation_time_index]!=None %}{{order[soi_creation_time_index].strftime('%Y-%m-%d')}}{% endif %}
                        </td>
                        <td rowspan="{{order[ship_history_index]|length + 4}}" scope="rowgroup">{{ order[if_index] }} <br> {{ order[item_name_index] }}</td>
                        <td rowspan="{{order[ship_history_index]|length + 3}}" scope="rowgroup"></td>
                        <td></td>
                        {% for size in order[sizes_scheme_index] %}
                            <td>{{size["size"]}}</td>
                        {% endfor %}
                        {% for empty_i in range (presenting_order_data[location]["max_col_span"]-order[sizes_scheme_index]|length) %}
                            <td></td>
                        {% endfor %}
                        <td></td>
                    </tr>
                    <tr >
                        <td>Qty</td>
                        {% for size_col in order[sizes_scheme_index] %}
                            {% for order_qty in order[order_qty_index] if order_qty.size==size_col.size %}
                                <td>{{order_qty.quantity}}</td>
                            {% else %}
                                <td>-</td>
                            {% endfor %}
                        {% endfor %}
                        {% for empty_i in range (presenting_order_data[location]["max_col_span"]-order[sizes_scheme_index]|length) %}
                            <td></td>
                        {% endfor %}
                        <td></td>
                    </tr>
                    <tr >
                        <td>Stock</td>
                        {% for size_col in order[sizes_scheme_index] %}
                            {% for stock_qty in order[stock_qty_index] if stock_qty.size==size_col.size %}
                                <td>{{stock_qty.quantity}}</td>
                            {% else %}
                                <td>-</td>
                            {% endfor %}
                        {% endfor %}
                        {% for empty_i in range (presenting_order_data[location]["max_col_span"]-order[sizes_scheme_index]|length) %}
                            <td></td>
                        {% endfor %}
                        <td></td>
                    </tr>
                    {% for row_index in range(order[ship_history_index]|length) %}
                        <tr class="{{ns.row_class}}"></tr>
                    {% endfor %}
                    <tr></tr>
                
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endfor %}
</div>

