<h2>{{_("Production Order Summary")}}</h2>

{% macro dropdown(items,class,id) %}
<div class="form-group">
    <select class="form-control {{class}}" id="{{id}}">
        {% for i in items %}
        {% if i.name %}
        <option value="{{i.name}}">{{i.name}}</option>
        {% else %}
        <option value="{{i}}">{{i}}</option>
        {% endif %}
        {% endfor %}
    </select>
</div>
{% endmacro %}

<div id="container" class="container mt-3">
    <div class="card" style="">
        <div class="card-body row">
            {% if order %}
            <div id="{{order.product_name}}" class="mt-3 product-table" style="width:90%">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <label for="exampleFormControlSelect1">{{_("Product Name")}}</label>
                            <br />
                            <span class="product"
                                data-product="{{order.product_name}}">{{frappe.db.get_value('Item',order.product_name,'item_name')}}</span>
                        </div>
                    </div>

                    <div class="row mt-3 table-section">
                        <table class="table table-bordered">
                            <thead>
                                <tr class="sizing">
                                    <th scope="col">{{_("Sizing")}}</th>
                                    {% for s in order.quantity_per_size %}
                                    <th scope="col">{{s.size}}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="qty">
                                    <th scope="row">{{_("Quantity")}}</th>
                                    {% for s in order.quantity_per_size %}
                                    <td scope="col" data-size="{{s.size}}">
                                        {{s.quantity}}</td>
                                    {% endfor %}
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div>
                        <table class="table table-bordered pricing-table">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col">{{_("Price/Pcs")}}</th>
                                    <th scope="col">{{_("Total Price")}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="price-pp"></td>
                                    <td class="total-price"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="col-6">
                <div class="m-3">
                    {{_("Date")}} <br />
                    <span>{% if date %}{{date}}{% endif %}
                        {{frappe.format(order.creation, {'fieldtype': 'Date'})}}
                    </span>
                </div>
                <div id="order-no-section" class="m-3">
                    {{_("Order Number")}}
                    <br />
                    <span id="order-no">
                        {{order.name}}
                    </span>
                </div>
                <div class="m-3">
                    {{_("Internal ref")}}
                    <br />
                    {{order.internal_ref}}
                </div>

                <div class="m-3">
                    {{_("Fabric ref")}}
                    <br />
                    {{order.fabric_ref}}
                </div>
                <div class="m-3">
                    <label for="exampleFormControlSelect1">{{_("Destination")}}</label>
                </div>
                <div class="m-3">
                    {{_("Comments")}}
                    <br />
                    {{order.comment}}
                </div>

            </div>
            <div class="col-6">
                <div class="m-3">
                    {{_("Production Factory Name")}}
                    <br />
                    {{order.production_factory}}
                </div>
                <div class="m-3">
                    {{_("Trimming")}}
                    <br />
                    {{order.trimming}}
                </div>
                <div class="m-3">
                    {{_("Packaging")}}
                    <br />
                    {{order.packaging}}
                </div>
            </div>

            <div class="ml-5">
                <button class="btn btn-primary" id="validate">{{_("Validate")}}</button>
            </div>
            {% endif %}
        </div>
    </div>

{# bottom part of summary page should go below #}
{% if isProd %}
    <div class="card" style="">
        <div class="card-body row">
            <div class="col-6">
                <div class="m-3">
                    {{_("Production")}}
                </div>
                <div class="m-3">
                    {{_("Expected Work Date")}}
                    <span>
                        <div class="input-group date">
                            <input id="exWorkDate" class="form-control" value={% if order.expected_work_date %}{{order.expected_work_date}}{% endif %} name="workDate"
                                placeholder="Desired date" type="date">
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </span>
                </div>

                <div class="m-3">
                    {{_("Confirmation Doc")}}
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" value={{order.confirmation_doc}} name="confirmation_doc" id="confirmation_doc">
                     
                        <label id="confirmation_doc-label" class="custom-file-label" for="confirmation_doc">{% if order.confirmation_doc %}{{order.confirmation_doc}}{% endif %}</label>
                        
                    </div>
                </div>

                <div class="m-3">
                    {{_("Proforma")}}
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" value={{order.profoma}} name="profoma" id="profoma">
                       
                        <label id="profoma-label" class="custom-file-label" for="profoma">{% if order.profoma %}{{order.profoma}}{% endif %}</label>
                    
                    </div>
                </div>

                <div class="m-3">
                    {{_("Invoice")}}
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" value={{order.invoice}} name="invoice" id="invoice">
    
                        <label id="invoice-label" class="custom-file-label" for="invoice">{% if order.invoice %}{{order.invoice}}{% endif %}</label>
                
                    </div>
                </div>

                <div class="m-3">
                    {{_("Shipment")}}
                </div>

                <div class="m-3">
                    {{_("Carrier")}}
                    <input id="carrier" type="text" value="{% if order.carrier %}{{order.carrier}}{% endif %}" class="form-control mt-2">
                </div>
                <div class="m-3">
                    {{_("Tracking Number")}}
                    <input id="tracking_number" type="text" value="{% if order.tracking_number %}{{order.tracking_number}}{% endif %}" class="form-control mt-2">
                </div>

                <div class="m-3">
                    {{_("Date of Shipment")}}
                    <div class="input-group date">
                        <input id="shipmentDate" class="form-control" value={{order.shipment_date}} name="desireddate"
                            placeholder="Desired date" type="date">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>

                <div class="ml-5">
                    {% if order.docstatus==0 %}
                    <button class="btn btn-primary" id="prodSubmit">{{_("Submit")}}</button>
                    {% endif %}
                </div>
            </div>

            <div class="col-6">
                <div class="m-3">
                    {{_("Comments")}}
                    <textarea class="form-control" id="comment"
                        rows="4">{% if order.production_comment %}{{order.production_comment}}{% endif %}</textarea>
                </div>
            </div>


        </div>
    </div>
{% endif %}



</div>